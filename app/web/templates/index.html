{% extends "base.html" %}

{% block nav %}
  <a href="#recipes-section">Recipes</a>
  <a href="#pantry">Pantry</a>
  <a href="#voice">Voice Ingest</a>
  <a href="/favorites">Favorites</a>
{% endblock %}

{% block content %}
<section class="card" id="recipes-section">
  <div class="card-header">
    <h2>Suggest recipes</h2>
  </div>
  <form id="suggest-form">
    <div class="row">
      <label>Time (minutes) <input type="number" id="time" min="0" /></label>
      <label>Servings <input type="number" id="servings" min="1" value="1" /></label>
    </div>
    <div class="row">
      <label>Mood <input id="mood" placeholder="light, comforting, spicy" /></label>
      <label>Diet (comma-separated) <input id="diet" placeholder="vegetarian, gluten-free" /></label>
    </div>
    <div class="row">
      <label>Protein goal (g) <input type="number" id="protein" min="0" step="1" /></label>
    </div>
    <button type="submit" class="primary">Suggest</button>
  </form>
  <div id="suggest-status" class="status" hidden></div>
  <div id="recipes"></div>
</section>

<section id="pantry" class="card">
  <div class="card-header">
    <h2>Pantry</h2>
    <button id="pantry-toggle" class="icon-button" aria-label="Collapse pantry">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-up"><polyline points="18 15 12 9 6 15"></polyline></svg>
    </button>
  </div>
  <div id="pantry-content">
    <div id="pantry-controls">
      <button id="refresh">Refresh</button>
      <button id="save" class="primary">Replace Pantry</button>
    </div>

    <div id="pantry-items"></div>

    <div class="row add-item-form">
      <input id="new-name" placeholder="e.g., Tomatoes" />
      <input id="new-qty" type="number" min="0" step="0.01" placeholder="Qty" />
      <input id="new-unit" placeholder="Unit (g, ml, cup, piece)" />
      <button id="add-row">Add</button>
    </div>
  </div>
</section>

<section id="voice" class="card">
  <div class="card-header">
    <h2>Narrate your ingredients</h2>
  </div>
  <div class="row">
    <button id="rec-toggle">Start Recording</button>
    <label>Language (optional)
      <input id="rec-lang" placeholder="en, hi, ..." />
    </label>
  </div>
  <div class="row">
    <audio id="rec-audio" controls hidden></audio>
  </div>
  <div class="row">
    <div id="transcribe-status" class="status" hidden></div>
  </div>
  <div class="row">
    <textarea id="rec-transcript" rows="3" placeholder="Transcript will appear here..." style="width:100%;"></textarea>
  </div>
  <div class="row">
    <button id="rec-extract" disabled>Extract Items</button>
  </div>
</section>

<section id="staging" class="card">
  <div class="card-header">
    <h2>Do these look right?</h2>
  </div>
  <div id="staged-items"></div>
  <div class="row">
    <button id="merge-rows" class="primary" disabled>Save Items to Pantry</button>
  </div>
</section>

<section id="toast" class="toast" hidden></section>
 
{% endblock %}
